import requests
import nmap

def scan_target(target):
    """Basic vulnerability scanner using Nmap."""
    nm = nmap.PortScanner()
    nm.scan(target, arguments='-sV')
    
    vulnerabilities = []
    for host in nm.all_hosts():
        for port in nm[host]['tcp']:
            service = nm[host]['tcp'][port]['name']
            product = nm[host]['tcp'][port].get('product', 'Unknown')
            version = nm[host]['tcp'][port].get('version', 'Unknown')
            
            vulnerabilities.append({
                'port': port,
                'service': service,
                'product': product,
                'version': version
            })
    
    return vulnerabilities

def exploit_target(target, port):
    """Simple exploit attempt (placeholder for real exploits)."""
    url = f"http://{target}:{port}/"
    try:
        response = requests.get(url)
        if response.status_code == 200:
            return f"[*] Exploit may be possible on {target}:{port}!"
        else:
            return f"[-] No exploit found for {target}:{port}."
    except requests.exceptions.RequestException:
        return f"[-] Failed to connect to {target}:{port}."

if __name__ == "__main__":
    print("""
    ==========================================
    ||      Vulnerability Scanner & Exploit  ||
    ||--------------------------------------||
    ||  1. Scan target for vulnerabilities ||
    ||  2. Attempt an exploit on a port    ||
    ||  3. Exit                            ||
    ==========================================
    """)
    
    target_ip = input("Enter target IP or domain: ")
    scan_results = scan_target(target_ip)
    
    print("\n--- Scan Results ---")
    for vuln in scan_results:
        print(f"Port: {vuln['port']}, Service: {vuln['service']}, Product: {vuln['product']}, Version: {vuln['version']}")
    
    while True:
        exploit_choice = input("\nDo you want to attempt an exploit? (yes/no): ")
        if exploit_choice.lower() == 'yes':
            target_port = int(input("Enter port to exploit: "))
            result = exploit_target(target_ip, target_port)
            print(result)
        else:
            print("Exiting...")
            break
